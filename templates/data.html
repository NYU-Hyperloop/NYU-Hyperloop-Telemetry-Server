<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" src="/static/jquery-3.1.0.min.js"></script>
    <script type="text/javascript" src="/static/socket.io.js"></script>
    <script src="/static/raphael-2.1.4.min.js"></script>
    <script src="/static/justgage.js"></script>

    <link rel="stylesheet" type="text/css" href="/static/style.css">

    <script type="text/javascript" charset="utf-8">

    // Our gauges
    var g1, g2, g3;

    // Here we connect to the server socket
    var socket = io.connect('https://' + document.domain + ':' + location.port);
    
    // Event triggered once successfully connected
    socket.on('connect', function() {
        $("#connection_status").text("Connected to pod!");
    });

    // Event triggered once disconnected
    socket.on('disconnect', function() {
        $("#connection_status").text("Disconnected");
    });


    // Event triggered when sensor data is received from the server
    socket.on('sensor_data', function(data){
        g1.refresh(data['velocity']);
        g2.refresh(data['acceleration']);
        g3.refresh(data['rpm']);
        g4.refresh(data['temperature_inside']);
        g5.refresh(data['temperature_outside']);
        g6.refresh(data['temperature_electronics']);

    });

    // Our emergency brake function
    function emergencyBrake()
    {
        socket.emit('brake', {type: 'emergency'});
    }



document.addEventListener("DOMContentLoaded", function(event) {

        g1 = new JustGage({
            id: "g1",
            value: 0,
            min: 0,
            max: 400,
            title: "Velocity",
            label: "mph",
            relativeGaugeSize: true,
            donut: false
        });

        g2 = new JustGage({
            id: "g2",
            value: 0,
            min: 0,
            max: 400,
            title: "Acceleration",
            label: "ft/s2",
            relativeGaugeSize: true,
            donut: false
        });

        g3 = new JustGage({
            id: "g3",
            value: 0,
            min: 0,
            max: 400,
            title: "RPM",
            label: "rpm",
            relativeGaugeSize: true,
            donut: false
        });
    
        g4 = new JustGage({
            id: "g4",
            value: 0,
            min: 0,
            max: 400,
            title: "Inside Temperature",
            label: "°F",
            relativeGaugeSize: true,
            donut: false
        });

        g5 = new JustGage({
            id: "g5",
            value: 0,
            min: 0,
            max: 400,
            title: "Outside Temperature",
            label: "°F",
            relativeGaugeSize: true,
            donut: false
        });

        g6 = new JustGage({
            id: "g6",
            value: 0,
            min: 0,
            max: 400,
            title: "Electronics Temperature",
            label: "°F",
            relativeGaugeSize: true,
            donut: false
        });



});

</script>
</head>



<body>

    <div class="col1">
        <div id="g1" class="gauge"></div>
        <div id="g2" class="gauge"></div>
        <div id="g3" class="gauge"></div>
    </div>
        
    <div class="col3">
        <div id="g4" class="gauge"></div>    
        <div id="g5" class="gauge"></div>        
        <div id="g6" class="gauge"></div>
    </div>

    <div class="col2">

    </div>


</body>

</html>